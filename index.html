<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="icon" href="./favicon.ico?v=5" sizes="any">
  <link rel="shortcut icon" href="./favicon.ico?v=5">
  <link rel="icon" type="image/png" sizes="192x192" href="./favicon-192.png?v=5">
  <link rel="icon" type="image/png" sizes="512x512" href="./favicon-512.png?v=5">
  <link rel="apple-touch-icon" sizes="180x180" href="./favicon-192.png?v=5">
  <link rel="stylesheet" href="./app.css?v=11">
  <title>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ ‚Äî –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">

        <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞: –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ª–µ–≤–∞, –ª–æ–≥–∏–Ω —Å–ø—Ä–∞–≤–∞ -->
        <div class="header-top">
          <div>
            <h1>
              <div class="logo">üè≠</div>
              <div>
                <div>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</div>
                <div class="subtitle">–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤</div>
              </div>
            </h1>
          </div>

          <div class="header-user">
            <div id="user-widget" class="user-widget hidden">
              <button id="user-menu-toggle" type="button" class="user-pill">
                <span id="user-name"></span>
                <span class="user-menu-arrow">‚ñæ</span>
              </button>
              <div id="user-menu-dropdown" class="user-menu-dropdown hidden">
                <button id="user-change-password" type="button">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                <button id="user-logout" type="button">–í—ã–π—Ç–∏</button>
              </div>
            </div>

            <button id="btn-login" class="btn secondary">
              üîê –í–æ–π—Ç–∏
            </button>
          </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è —Å—Ç—Ä–æ–∫–∞: –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
        <div class="header-actions">
          <button id="btn-help" class="btn secondary">
            üí° –°–ø—Ä–∞–≤–∫–∞
          </button>
          <button id="btn-clear" class="btn secondary">
            ‚úñ –û—á–∏—Å—Ç–∏—Ç—å
          </button>
          <button id="btn-import" class="btn secondary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            –ó–∞–≥—Ä—É–∑–∏—Ç—å
          </button>
          <button id="btn-export" class="btn secondary">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </button>
          <button id="btn-optimize" class="btn success">
            ‚ñ∂ –†–∞—Å—á—ë—Ç –ø–ª–∞–Ω–∞
          </button>
        </div>

      </div>
    </header>
    <div class="main-card">
      <div class="tabs-container">
        <button class="tab active" data-tab="orders">
          <span class="tab-icon">üì¶</span> –ó–∞–∫–∞–∑—ã –∏ –¥–æ—Å—Ç–∞–≤–∫–∏
        </button>
        <button class="tab" data-tab="stones">
          <span class="tab-icon">üíé</span> –ö–∞–º–Ω–∏ –∏ —Ä–∞—Å–ø–∏–ª
        </button>
        <button class="tab" data-tab="details">
          <span class="tab-icon">‚öôÔ∏è</span> –î–µ—Ç–∞–ª–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞
        </button>
        <button class="tab" data-tab="export">
          <span class="tab-icon">üìä</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        </button>
        <button class="tab" data-tab="dxf" id="tab-btn-dxf" style="display:none;">
          <span class="tab-icon">üìê</span> –†–∞–±–æ—Ç–∞ —Å DXF
        </button>
      </div>

      <section id="tab-orders" class="section active">
        <div class="card">
          <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑</h3>
          <div class="grid g3">
            <div>
              <label>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</label>
              <input id="new-order-id" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 7000" />
            </div>
            <div>
              <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
              <label style="display:flex;align-items:center;gap:8px;margin-top:6px">
                <input id="new-order-prio-flag" type="checkbox">
                –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –∑–∞–∫–∞–∑
              </label>
            </div>
            <div class="row row-end">
              <button id="btn-add-order" class="btn">
                <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑
              </button>
            </div>
          </div>
        </div>

        <div id="orders-list" class="list" style="margin-top:16px"></div>
        
        <div class="hr"></div>
        
        <div class="card" id="delivery-composer">
          <h3>üöö –°–æ–∑–¥–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É</h3>
          <div class="info-box">
            üí° –í –æ–¥–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ –º–æ–∂–Ω–æ –ø—Ä–∏–≤–µ–∑—Ç–∏ –∫–∞–º–Ω–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
          </div>
          <div id="del-lines"></div>
          <div class="row" style="margin-top:12px">
            <button class="btn small secondary" id="btn-add-del-line">
              <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –¥–æ—Å—Ç–∞–≤–∫–∏
            </button>
          </div>
          <div class="grid g3" style="margin-top:16px">
            <div>
              <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ (–º–∏–Ω—É—Ç—ã)</label>
              <input type="number" id="del-duration" value="0" min="0">
            </div>
            <div class="row row-end">
              <button class="btn success" id="btn-create-delivery">
                <span>‚úÖ</span> –°–æ–∑–¥–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É
              </button>
            </div>
          </div>
        </div>
        
        <div class="hr"></div>
        
        <h3 style="margin: 20px 0 12px; font-size: 18px; font-weight: 600;">üì¶ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
        <div id="deliveries-list" class="list"></div>
      </section>

      <section id="tab-stones" class="section">
        <div class="info-box">
          üí° –ó–¥–µ—Å—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø–∏–ª–∞ –∫–∞–º–Ω–µ–π –Ω–∞ –ø–∏–ª–µ. –ò–∑ –æ–¥–Ω–æ–≥–æ –∫–∞–º–Ω—è –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Ç–∞–ª–µ–π
        </div>
        <div id="stones-list" class="list"></div>
      </section>

      <section id="tab-details" class="section">
        <div class="info-box">
          üí° –ü–æ—Å–ª–µ —Ä–∞—Å–ø–∏–ª–∞ –¥–µ—Ç–∞–ª–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫—Ä–æ–º–∫—É –∏ —Ñ—Ä–µ–∑–µ—Ä–æ–≤–∫—É –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∞–Ω–∫–∞—Ö
        </div>
        <div id="details-list" class="list"></div>
      </section>

      <section id="tab-export" class="section">
        <div class="grid g2">
          <div class="card">
            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <div id="summary" class="stats-grid"></div>
          </div>
          <div class="card">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—á—ë—Ç–∞</h3>
            <div class="help">–î–ª—è –±—É–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è</div>
          </div>
        </div>
        <div id="user-admin-wrapper" class="card" style="margin-top:16px; display:none;">
          <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
          <div id="user-admin-content" class="help">
            –ó–∞–≥—Ä—É–∑–∫–∞...
          </div>
        </div>
      </section>

      <section id="tab-dxf" class="section">
        <h2>–†–∞–±–æ—Ç–∞ —Å DXF</h2>

        <div class="card">
          <p class="help">
            –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç—É —Ä–∞—Å–∫—Ä–æ—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ DXF. –°–µ—Ä–≤–∏—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –¥–ª–∏–Ω—ã
            ¬´–ö—Ä–æ–º–∫–∞¬ª –∏ ¬´–ü–æ–¥–≤–æ—Ä–æ—Ç¬ª, –∞ —Ç–∞–∫–∂–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—ã–∫–∏ –¢–° –∏ –¶–°.
          </p>

          <div style="margin-bottom: 12px; display:flex; flex-wrap:wrap; gap:8px; align-items:center;">
            <input type="file" id="dxf-file" accept=".dxf">
            <button class="btn primary" id="dxf-analyze-btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å</button>
          </div>

          <div id="dxf-status" class="help"></div>

          <div id="dxf-result" style="margin-top: 12px; display: none;">
            <div class="grid g2">
              <div>
                <div class="muted">–ö—Ä–æ–º–∫–∞</div>
                <div id="dxf-kromka"></div>
              </div>
              <div>
                <div class="muted">–ü–æ–¥–≤–æ—Ä–æ—Ç</div>
                <div id="dxf-podvorot"></div>
              </div>
              <div>
                <div class="muted">–¢–°</div>
                <div id="dxf-ts"></div>
              </div>
              <div>
                <div class="muted">–¶–°</div>
                <div id="dxf-cs"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

    </div>
  </div>
  <div id="login-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content card">
      <h3>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
      <div class="grid">
        <div>
          <label>–õ–æ–≥–∏–Ω</label>
          <input id="login-username" type="text" autocomplete="username">
        </div>
        <div>
          <label>–ü–∞—Ä–æ–ª—å</label>
          <input id="login-password" type="password" autocomplete="current-password">
        </div>
        <div class="row row-end">
          <button id="btn-login-submit" class="btn success">–í–æ–π—Ç–∏</button>
          <button id="btn-login-cancel" class="btn secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
        <div id="login-error" class="help" style="color:var(--danger);display:none;"></div>
      </div>
    </div>
  </div>
  <!-- –ú–æ–¥–∞–ª–∫–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
  <div id="pw-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content card">
      <h3>üîë –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
      <div class="grid">
        <div>
          <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
          <input id="pw-old" type="password" autocomplete="current-password">
        </div>
        <div>
          <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
          <input id="pw-new" type="password" autocomplete="new-password">
        </div>
        <div>
          <label>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è</label>
          <input id="pw-new2" type="password" autocomplete="new-password">
        </div>
        <div class="row row-end">
          <button id="btn-pw-submit" class="btn success">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </div>
        <div id="pw-error"
             class="help"
             style="color:var(--danger);display:none;"></div>
      </div>
    </div>
  </div>
  <script src="./config.js?v=1"></script>
  <script src="./app.js?v=11" defer></script>
</body>
</html>